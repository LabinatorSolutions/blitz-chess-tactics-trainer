@use "_variables" as vars

html 
  box-sizing: border-box
  overflow-y: scroll

*, *:before, *:after 
  box-sizing: inherit

body 
  font-family: vars.$main-font
  background: #1f1f1f
  color: #fafafa
  -webkit-font-smoothing: antialiased
  // Replace FastClick with CSS touch-action
  touch-action: manipulation

  // Removed max-height restriction that was causing content cutoff on long pages

// fixes undraggable pieces in IE edge
svg use
  pointer-events: none

button 
  border: none
  outline: none

  &:hover 
    cursor: pointer

.container 
  width: vars.$main-width
  margin: 0 auto
  // padding: 0 15px

.invisible 
  opacity: 0
  pointer-events: none

// fix chessground board shapes affecting scrollbar height
.cg-shapes
  height: 0 !important

// Flash messages
.flash-notice,
.flash-alert
  position: fixed
  top: 20px
  right: 20px
  padding: 15px 20px
  border-radius: 6px
  font-weight: 500
  z-index: 1000
  max-width: 400px
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3)
  animation: slideInRight 0.3s ease-out

.flash-notice
  background: #28a745
  color: white
  border-left: 4px solid #1e7e34

.flash-alert
  background: #dc3545
  color: white
  border-left: 4px solid #c82333

@keyframes slideInRight
  from
    transform: translateX(100%)
    opacity: 0
  to
    transform: translateX(0)
    opacity: 1

.main-footer
  background: #111
  height: 60px
  width: 100%
  box-sizing: border-box
  overflow-x: hidden
  
  .container
    display: flex
    align-items: center
    height: 100%
    // Use default container behavior (700px centered)
    
    // Override to full width only on responsive breakpoints
    @media (max-width: 768px)
      width: 100%
      max-width: none
      padding: 0 15px
      box-sizing: border-box
      
    @media (max-width: 480px)
      padding: 0 10px
    
  a
    color: #6D6D6D
    text-decoration: none
    font-size: 11px
    text-transform: uppercase
    letter-spacing: 0.5px
    transition: color 0.15s ease
    
    &:hover
      color: #e0e0e0

// Pagination styles
.pagination-info
  text-align: center
  margin: 20px 0
  color: rgba(250, 250, 250, 0.6)
  font-size: 14px

.pagination
  display: flex
  justify-content: center
  align-items: center
  margin: 30px 0
  gap: 10px

  .pagination-link
    display: inline-block
    padding: 8px 12px
    background: rgba(255, 255, 255, 0.1)
    color: rgba(250, 250, 250, 0.8)
    text-decoration: none
    border-radius: 4px
    transition: all 0.2s ease
    border: 1px solid rgba(255, 255, 255, 0.2)

    &:hover:not(.disabled):not(.current)
      background: rgba(255, 255, 255, 0.2)
      color: #ffffff
      border-color: rgba(255, 255, 255, 0.3)

    &.current
      background: #007bff
      color: white
      border-color: #0056b3

    &.disabled
      opacity: 0.5
      cursor: not-allowed
      background: rgba(255, 255, 255, 0.05)

  .pagination-pages
    display: flex
    gap: 5px
    align-items: center

  .pagination-ellipsis
    color: rgba(250, 250, 250, 0.4)
    padding: 0 5px

// Infinity mode overflow protection
.infinity-mode
  overflow-x: hidden

// Recent puzzles section
.recent-puzzles-section
  margin-top: 40px
  padding: 30px 0
  background: rgba(0, 0, 0, 0.15)
  width: 100vw
  margin-left: calc(-50vw + 50%)
  margin-right: calc(-50vw + 50%)

  h3
    text-align: center
    margin-bottom: 30px
    color: rgba(250, 250, 250, 0.8)
    font-size: 20px

  .recent-puzzles-list
    max-width: 600px
    margin: 0 auto

    .no-recent-puzzles
      text-align: center
      color: rgba(250, 250, 250, 0.5)
      font-style: italic
      padding: 40px 20px

    .mini-chessboard
      // Use the same highlighting as the main board (respects user customization)
      // The user's custom CSS will override these colors via CSS custom properties

.recent-puzzle-item
    display: flex
    align-items: center
    gap: 20px
    padding: 15px 0
    border-bottom: 1px solid rgba(255, 255, 255, 0.05)

    &:last-child
      border-bottom: none

    .puzzle-miniboard
      flex-shrink: 0

      .miniboard-link
        transition: all 0.2s ease

        &:hover
          box-shadow: 0 4px 12px rgba(255, 232, 0, 0.3)

      .mini-chessboard
        width: 200px
        height: 200px

    .puzzle-info
      flex: 1
      display: flex
      flex-direction: column
      gap: 8px

      .puzzle-meta
        display: flex
        flex-direction: column
        gap: 12px

        .puzzle-time
          color: rgba(250, 250, 250, 0.5)
          font-size: 16px

        .puzzle-difficulty
          color: rgba(250, 250, 250, 0.6)
          font-size: 14px

      .puzzle-actions
        margin-top: 5px

        .view-solution-btn
          background: rgba(27, 73, 171, 0.8)
          color: white
          border: none
          padding: 6px 12px
          border-radius: 4px
          font-size: 12px
          cursor: pointer
          transition: all 0.2s ease, opacity 0.3s ease
          opacity: 1
          min-width: 120px
          text-align: center

          &:hover
            background: rgba(27, 73, 171, 1)

          &:active
            background: rgba(27, 73, 171, 0.9)

          &:disabled
            cursor: not-allowed
            opacity: 0.5

// Solution modal
.solution-modal
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  background: rgba(0, 0, 0, 0.8)
  display: flex
  align-items: center
  justify-content: center
  z-index: 1000

  .solution-modal-content
    background: #2a2a2a
    border-radius: 8px
    max-width: 600px
    width: 90%
    max-height: 80vh
    overflow: hidden
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5)

  .solution-modal-header
    display: flex
    justify-content: space-between
    align-items: center
    padding: 20px
    border-bottom: 1px solid rgba(255, 255, 255, 0.1)

    h3
      margin: 0
      color: rgba(250, 250, 250, 0.9)
      font-size: 18px

    .solution-modal-close
      background: none
      border: none
      color: rgba(250, 250, 250, 0.6)
      font-size: 24px
      cursor: pointer
      padding: 0
      width: 30px
      height: 30px
      display: flex
      align-items: center
      justify-content: center

      &:hover
        color: rgba(250, 250, 250, 0.9)

  .solution-modal-body
    padding: 20px

    .solution-board-container
      display: flex
      justify-content: center
      margin-bottom: 20px

      .chessground-board
        width: 400px
        height: 400px

    .solution-controls
      display: flex
      gap: 10px
      justify-content: center

      .solution-play-btn,
      .solution-reset-btn
        background: rgba(0, 123, 255, 0.8)
        color: white
        border: none
        padding: 10px 20px
        border-radius: 4px
        cursor: pointer
        transition: all 0.2s ease

        &:hover
          background: rgba(0, 123, 255, 1)

        &:disabled
          background: rgba(0, 123, 255, 0.4)
          cursor: not-allowed

      .solution-reset-btn
        background: rgba(108, 117, 125, 0.8)

        &:hover
          background: rgba(108, 117, 125, 1)
