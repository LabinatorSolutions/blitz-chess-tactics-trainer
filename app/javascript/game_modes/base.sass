@forward "../../assets/stylesheets/buttons"
@import "../../assets/stylesheets/_colors"
@import "../../assets/stylesheets/_variables"

.game-mode
  $board-size: 496px

  .container
    display: flex
    flex-direction: column
    align-items: center
    min-height: 100vh
    padding: 20px 0
    padding-top: 30px

  // Above board section positioning
  .above-board
    width: $board-size
    height: 50px
    margin-bottom: 20px
    position: relative
    text-align: center

    .instructions
      font-size: 22px
      font-weight: bold
      text-shadow: 0 0 8px rgba(0,0,0,0.9)
      width: 100%
      text-align: center
      margin: 0 auto
      position: absolute
      top: 15px
      transition: all 0.35s ease-out

      &.smaller
        font-size: 20px
        top: 10px

    .puzzle-hint
      text-align: center
      margin: 0 auto
      position: absolute
      top: 30px
      width: 100%
      transition: opacity 0.15s ease

      .hint-trigger
        background: #565656
        padding: 6px 14px 5px
        color: white
        display: inline-block
        border-radius: 2px
        font-size: 12px
        transition: opacity 0.08s ease

        &:hover
          cursor: pointer
          background: #676767

        &.invisible
          pointer-events: none

      .move
        font-size: 14px
        color: rgba(255,255,255,0.5)
        height: 0

    // Move status and combo counter styles for above-board area
    .move-status 
      opacity: 1
      font-family: $combo-indicator-font
      font-size: 32px
      width: 100%
      position: absolute
      top: 10px
      text-align: center
      text-transform: uppercase
      transform: scale3d(1,1,1)
      transition: opacity 0.02s ease

      &.fade-out 
        opacity: 0
        transform: scale3d(0.92,0.92,1)
        transition: opacity 0.9s ease-out 0.2s, transform 0.05s ease-in-out

      .perfect 
        color: $move-perfect
        font-weight: 600
        letter-spacing: 3px
        font-size: 40px

      .great 
        color: $move-great
        font-weight: 600
        letter-spacing: 3px
        font-size: 38px

      .good 
        color: $move-good
        font-weight: 600
        letter-spacing: 3px
        font-size: 38px

      .almost 
        color: $move-almost
        position: relative
        top: 12px

      .fail 
        color: $move-fail
        position: relative
        top: 12px

    .combo-counter 
      text-align: center
      font-family: $combo-indicator-font
      position: absolute
      top: 30px
      width: 100%
      transition: opacity 0.25s ease

      .counter 
        display: inline-block
        font-size: 24px
        margin-right: 5px

        &.large 
          font-size: 52px

        &.on-fire 
          font-size: 70px

        &.emphasis 
          transform: scale3d(1.25, 1.25, 1)

      .combo-text 
        position: relative
        text-transform: uppercase
        font-size: 14px
        top: -2px

  .board-area-container
    display: flex
    flex-direction: column
    align-items: center
    margin: 0
    padding: 0

  .board-area
    width: $board-size
    height: $board-size
    position: relative

  .chessground-board
    width: $board-size
    height: $board-size
    position: absolute
    top: 0
    left: 50%
    transform: translateX(-50%)

  .vue-app-mount
    display: flex
    width: 100%
    justify-content: center
    position: relative
    z-index: 3
    margin-top: 20px

  // the overlay over the chessboard that shows up at the end of the game
  .board-modal-container
    width: 100%
    height: 100%
    background: rgba(0,0,0,0.6)
    position: absolute
    left: 0
    top: 0
    z-index: 2

  // Common under-board UI styles
  .game-under-board
    display: flex
    flex-direction: column
    justify-content: flex-start
    min-width: 200px
    gap: 20px
    margin: 20px auto 0
    max-width: 496px
    position: relative
    z-index: 3

  // Common timer styles
  .timer
    font-size: 40px
    margin-bottom: 0.5rem
    transition: opacity 0.25s ease, color 0.25s ease
    
    &.stopped
      opacity: 0.3
    
    &.rewarded
      color: #34FF00
    
    &.penalized
      color: red
    
    &.complete
      color: #ffff00

  // Common score container styles
  .score-container
    text-align: center
    
    .label
      font-size: 13px
      color: rgba(255,255,255,0.5)
      margin-bottom: 5px
    
    .score
      font-size: 30px
      margin-top: 15px

  // Common completion screen styles
  .game-complete
    display: flex
    flex-direction: column
    align-items: center
    padding: 20px 0
    gap: 20px

  // Common high scores styles
  .recent-high-scores
    .label
      margin-bottom: 15px
    
    .list
      display: flex
      flex-direction: column
      align-items: center
      gap: 8px
    
    .high-score
      display: flex
      align-items: center
      gap: 15px
      
      .score
        font-size: 16px
        margin: 0
        min-width: 30px
      
      .player-name
        font-size: 16px
        color: rgba(255,255,255,0.7)

  // Common "make a move" text
  .make-a-move
    line-height: 26px
    opacity: 0.7
    font-size: 18px
    margin: 20px 0

  // Common utility styles
  .rewarded
    color: #34FF00

  .penalized
    color: red

  .complete
    color: #ffff00

  // Common responsive patterns
  @media (max-width: 500px)
    .container
      padding: 10px

    .board-area-container
      width: 100% !important

    .game-under-board
      .recent-high-scores
        .label
          margin-bottom: 8px

  @media (max-aspect-ratio: 11/16)
    .game-under-board
      padding: 20px
      min-width: auto !important
      width: 100%
      max-width: 496px

      .make-a-move
        width: 100% !important
        text-align: center

    .game-complete
      width: 100% !important
